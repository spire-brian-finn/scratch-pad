# Generated by perplexity via claude 3.5 sonnet
import os
import glob
import time

def test_listdir(directory):
    start = time.time()
    files = os.listdir(directory)
    end = time.time()
    return end - start, len(files)

def test_glob(directory):
    start = time.time()
    files = glob.glob(os.path.join(directory, "*"))
    end = time.time()
    return end - start, len(files)

def run_benchmark(directory, iterations=1000):
    listdir_times = []
    glob_times = []

    for _ in xrange(iterations):
        lt, lcount = test_listdir(directory)
        gt, gcount = test_glob(directory)
        listdir_times.append(lt)
        glob_times.append(gt)

    print "Directory: %s" % directory
    print "Files found: %d" % lcount
    print "\nAverage times over %d iterations:" % iterations
    print "os.listdir: %.6f seconds" % (sum(listdir_times) / iterations)
    print "glob.glob:  %.6f seconds" % (sum(glob_times) / iterations)

if __name__ == "__main__":
    test_dir = "."  # Current directory
    run_benchmark(test_dir)
